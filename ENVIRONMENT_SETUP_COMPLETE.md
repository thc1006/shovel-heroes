# âœ… ç’°å¢ƒè¨­å®šæª”æ¡ˆå®Œæˆå ±å‘Š

## ğŸ“‹ å·²å‰µå»ºçš„æª”æ¡ˆæ¸…å–®

### 1. ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹æª”æ¡ˆ

#### âœ… å‰ç«¯ç’°å¢ƒè®Šæ•¸
**æª”æ¡ˆ**: `.env.example`
- ä½ç½®: å°ˆæ¡ˆæ ¹ç›®éŒ„
- ç”¨é€”: å‰ç«¯ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹ï¼ˆViteï¼‰
- å…§å®¹:
  - æ¨¡å¼åˆ‡æ›ï¼ˆLocalStorage / REST APIï¼‰
  - API é…ç½®
  - GitHub Pages éƒ¨ç½²
  - é–‹ç™¼å·¥å…·è¨­å®š
  - ç¬¬ä¸‰æ–¹æœå‹™ï¼ˆæœªä¾†æ“´å……ï¼‰

#### âœ… å¾Œç«¯ç’°å¢ƒè®Šæ•¸
**æª”æ¡ˆ**: `packages/backend/.env.example`
- ä½ç½®: å¾Œç«¯å¥—ä»¶ç›®éŒ„
- ç”¨é€”: å¾Œç«¯ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹ï¼ˆFastifyï¼‰
- å…§å®¹:
  - è³‡æ–™åº«é€£ç·š
  - ä¼ºæœå™¨é…ç½®
  - JWT é©—è­‰
  - CORS è¨­å®š
  - æ—¥èªŒé…ç½®
  - OpenTelemetry
  - Emailï¼ˆSMTPï¼‰
  - Rate Limiting
  - å®‰å…¨è¨­å®š
  - åŠŸèƒ½é–‹é—œ

#### âœ… æœ¬åœ°é–‹ç™¼å¿«é€Ÿè¨­å®š
**æª”æ¡ˆ**: `.env.example.local`
- ä½ç½®: å°ˆæ¡ˆæ ¹ç›®éŒ„
- ç”¨é€”: æœ¬åœ°é–‹ç™¼æœ€å°é…ç½®ç¯„ä¾‹
- ä½¿ç”¨æ–¹å¼: `cp .env.example.local .env.local`

### 2. æ–‡ä»¶æª”æ¡ˆ

#### âœ… ç’°å¢ƒè®Šæ•¸å®Œæ•´èªªæ˜
**æª”æ¡ˆ**: `docs/environment-variables.md`
- 14KBï¼Œå®Œæ•´çš„ç’°å¢ƒè®Šæ•¸åƒè€ƒæ–‡ä»¶
- å…§å®¹åŒ…å«:
  - æ‰€æœ‰ç’°å¢ƒè®Šæ•¸è©³ç´°èªªæ˜
  - ä¸åŒéƒ¨ç½²æƒ…å¢ƒé…ç½®ç¯„ä¾‹
  - å®‰å…¨æ³¨æ„äº‹é …
  - æ•…éšœæ’é™¤æŒ‡å—
  - ç¯„ä¾‹é…ç½®æª”æ¡ˆï¼ˆé–‹ç™¼/ç”Ÿç”¢ï¼‰

#### âœ… ç’°å¢ƒè¨­å®šå¿«é€ŸæŒ‡å—
**æª”æ¡ˆ**: `docs/environment-setup-guide.md`
- 15KBï¼Œåˆ†æ­¥é©Ÿè¨­å®šæŒ‡å—
- åŒ…å«ä¸‰ç¨®ä¸»è¦æƒ…å¢ƒ:
  1. å‰ç«¯ç¨ç«‹é–‹ç™¼ï¼ˆç„¡éœ€å¾Œç«¯ï¼‰
  2. å®Œæ•´é–‹ç™¼ç’°å¢ƒï¼ˆå‰ç«¯ + å¾Œç«¯ï¼‰
  3. ç”Ÿç”¢éƒ¨ç½²ï¼ˆVM/Dockerï¼‰
- å¸¸è¦‹å•é¡Œ Q&A

### 3. å·¥å…·è…³æœ¬

#### âœ… ç’°å¢ƒè®Šæ•¸é©—è­‰è…³æœ¬
**æª”æ¡ˆ**: `scripts/verify-env.sh`
- è‡ªå‹•åŒ–é©—è­‰å·¥å…·
- åŠŸèƒ½:
  - æª¢æŸ¥å¿…è¦ç’°å¢ƒè®Šæ•¸
  - é©—è­‰ JWT Secret å¼·åº¦
  - CORS é…ç½®æª¢æŸ¥
  - Git å®‰å…¨æª¢æŸ¥
  - ç”Ÿç”¢ç’°å¢ƒç‰¹æ®Šæª¢æŸ¥
- ä½¿ç”¨æ–¹å¼: `./scripts/verify-env.sh`

### 4. Git é…ç½®æ›´æ–°

#### âœ… .gitignore æ›´æ–°
å·²æ–°å¢ä»¥ä¸‹å¿½ç•¥è¦å‰‡:
```gitignore
# Environments
.env
.env.local
.env.*.local
.env.production
.env.development

# Backend environments
packages/backend/.env
packages/backend/.env.local
packages/backend/.env.*.local
```

---

## ğŸ¯ å¿«é€Ÿé–‹å§‹æŒ‡ä»¤

### æ–¹å¼ 1ï¼šå‰ç«¯ç¨ç«‹é–‹ç™¼ï¼ˆæœ€å¿«ï¼‰

```bash
# 1. è¤‡è£½ç’°å¢ƒè®Šæ•¸
cp .env.example.local .env.local

# 2. è¨­å®šç‚º LocalStorage æ¨¡å¼
echo "VITE_USE_FRONTEND=true" > .env.local

# 3. å•Ÿå‹•
npm run dev
```

### æ–¹å¼ 2ï¼šå®Œæ•´é–‹ç™¼ç’°å¢ƒ

```bash
# 1. å‰ç«¯ç’°å¢ƒè®Šæ•¸
cp .env.example.local .env.local
echo "VITE_USE_FRONTEND=false" >> .env.local
echo "VITE_API_BASE=http://localhost:8787" >> .env.local

# 2. å¾Œç«¯ç’°å¢ƒè®Šæ•¸
cd packages/backend
cp .env.example .env
# ä¿®æ”¹ JWT_SECRETï¼ˆä½¿ç”¨å¼·éš¨æ©Ÿå­—ä¸²ï¼‰
cd ../..

# 3. å•Ÿå‹•åŸºç¤è¨­æ–½
docker-compose up -d db mailhog

# 4. è³‡æ–™åº«é·ç§»
npm run migrate:up

# 5. å•Ÿå‹•å¾Œç«¯ï¼ˆçµ‚ç«¯æ©Ÿ 1ï¼‰
npm run dev:api

# 6. å•Ÿå‹•å‰ç«¯ï¼ˆçµ‚ç«¯æ©Ÿ 2ï¼‰
npm run dev
```

### é©—è­‰ç’°å¢ƒè¨­å®š

```bash
# åŸ·è¡Œè‡ªå‹•é©—è­‰
./scripts/verify-env.sh

# æ‰‹å‹•æ¸¬è©¦
curl http://localhost:8787/api/health
curl http://localhost:5173
```

---

## ğŸ“š æª”æ¡ˆçµæ§‹

```
shovel-heroes/
â”œâ”€â”€ .env.example                    # âœ… å‰ç«¯ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
â”œâ”€â”€ .env.example.local              # âœ… æœ¬åœ°é–‹ç™¼å¿«é€Ÿè¨­å®š
â”œâ”€â”€ .gitignore                      # âœ… å·²æ›´æ–°ï¼ˆåŒ…å« .env å¿½ç•¥è¦å‰‡ï¼‰
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ environment-variables.md    # âœ… ç’°å¢ƒè®Šæ•¸å®Œæ•´èªªæ˜ï¼ˆ14KBï¼‰
â”‚   â””â”€â”€ environment-setup-guide.md  # âœ… ç’°å¢ƒè¨­å®šå¿«é€ŸæŒ‡å—ï¼ˆ15KBï¼‰
â”‚
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ verify-env.sh               # âœ… ç’°å¢ƒè®Šæ•¸é©—è­‰è…³æœ¬
â”‚
â””â”€â”€ packages/
    â””â”€â”€ backend/
        â””â”€â”€ .env.example            # âœ… å¾Œç«¯ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
```

---

## ğŸ”’ å®‰å…¨æª¢æŸ¥æ¸…å–®

### âœ… å·²å®Œæˆ

- [x] .env æª”æ¡ˆå·²åŠ å…¥ .gitignore
- [x] .env.local å·²åŠ å…¥ .gitignore
- [x] packages/backend/.env å·²åŠ å…¥ .gitignore
- [x] JWT_SECRET ç¯„ä¾‹ä½¿ç”¨æç¤ºæ–‡å­—ï¼ˆéçœŸå¯¦å¯†é‘°ï¼‰
- [x] è³‡æ–™åº«å¯†ç¢¼åœ¨ç¯„ä¾‹ä¸­ä½¿ç”¨å¼±å¯†ç¢¼ï¼ˆæé†’ç”¨æˆ¶æ›´æ”¹ï¼‰
- [x] ç”Ÿç”¢ç’°å¢ƒç¯„ä¾‹åŒ…å«å®‰å…¨é…ç½®å»ºè­°
- [x] æ–‡ä»¶ä¸­åŒ…å«å®‰å…¨æ³¨æ„äº‹é …ç« ç¯€

### âš ï¸ ä½¿ç”¨è€…é ˆçŸ¥

åœ¨æ­£å¼éƒ¨ç½²å‰ï¼Œå‹™å¿…ï¼š

1. **æ›´æ› JWT_SECRET**:
   ```bash
   openssl rand -base64 32
   ```

2. **ä½¿ç”¨å¼·è³‡æ–™åº«å¯†ç¢¼**:
   ```bash
   openssl rand -base64 24
   ```

3. **æª¢æŸ¥ Git è¿½è¹¤**:
   ```bash
   git ls-files | grep "\.env"  # æ‡‰è©²æ²’æœ‰è¼¸å‡º
   ```

4. **é©—è­‰ç’°å¢ƒé…ç½®**:
   ```bash
   ./scripts/verify-env.sh
   ```

---

## ğŸ“– ç›¸é—œæ–‡ä»¶é€£çµ

| æ–‡ä»¶ | èªªæ˜ |
|------|------|
| [environment-variables.md](docs/environment-variables.md) | æ‰€æœ‰ç’°å¢ƒè®Šæ•¸çš„è©³ç´°èªªæ˜ |
| [environment-setup-guide.md](docs/environment-setup-guide.md) | åˆ†æ­¥é©Ÿè¨­å®šæŒ‡å— |
| [BACKEND_API_INTEGRATION_GUIDE.md](BACKEND_API_INTEGRATION_GUIDE.md) | å¾Œç«¯ API æ•´åˆæŒ‡å— |
| [README.md](README.md) | å°ˆæ¡ˆæ¦‚è¿° |
| [CLAUDE.md](CLAUDE.md) | å°ˆæ¡ˆé–‹ç™¼æŒ‡å— |

---

## ğŸ‰ å®Œæˆç‹€æ…‹

æ‰€æœ‰ç’°å¢ƒè¨­å®šç›¸é—œæª”æ¡ˆå·²å‰µå»ºå®Œæˆï¼

**ç¸½è¨ˆ**:
- âœ… 4 å€‹ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹æª”æ¡ˆ
- âœ… 2 å€‹è©³ç´°æ–‡ä»¶ï¼ˆ29KBï¼‰
- âœ… 1 å€‹é©—è­‰è…³æœ¬
- âœ… 1 å€‹ .gitignore æ›´æ–°

**ä¸‹ä¸€æ­¥**:
1. æ ¹æ“šéœ€æ±‚è¤‡è£½å°æ‡‰çš„ .env.example ç‚º .env
2. åƒè€ƒ `docs/environment-setup-guide.md` é€²è¡Œè¨­å®š
3. åŸ·è¡Œ `./scripts/verify-env.sh` é©—è­‰é…ç½®
4. é–‹å§‹é–‹ç™¼ï¼

---

**å‰µå»ºæ™‚é–“**: 2025-10-02
**ç¶­è­·è€…**: Shovel Heroes é–‹ç™¼åœ˜éšŠ
